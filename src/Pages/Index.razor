@page "/"

@inject HttpClient Http
@inject NotificationService notificationService


<RadzenCard>
    <RadzenLogin AllowRegister="true" AllowResetPassword="true" Username="@userName" Password="@userpassword"
                 Login="@((args) => Login(args))" 
                 ResetPassword="@(ResetPassword)"
                 Register="@(Register)"
                 Style="margin-bottom: 20px;" />
</RadzenCard>


@code {
    string userName = "admin";
    string userpassword = "admin";


    private void ResetPassword()
    {

    }

    private void Register()
    {

    }


    private async Task Login(LoginArgs args)
    {
        var request = new auth { login = args.Username, password = args.Password };

        var message = new NotificationMessage { Severity = NotificationSeverity.Success, Summary = "Login", Detail = "Login realizado com sucesso", Duration = 4000 };
        ShowNotification(message);

        try
        {
            await Http.PostAsJsonAsync("http://localhost:8080/auth", request);

        }
        catch (Exception)
        {

        }
    }

    void ShowNotification(NotificationMessage message)
    {
        notificationService.Notify();
        StateHasChanged();

    }

    class auth
    {
        public string login { get; set; }
        public string password { get; set; }
    }
}